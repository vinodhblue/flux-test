# apiVersion: v1
# kind: Secret
# metadata:
#   name: pxc-1-secret
#   namespace: flux-system
# type: Opaque
# data:
#   root-password: cm9vdC1wYXNzd29yZA==
# ---
# apiVersion:  helm.toolkit.fluxcd.io/v2beta1 
# kind: HelmRelease
# metadata:
#   name: pxc-1
#   namespace: flux-system
# spec:
#   chart:
#     spec:
#       chart: pxc-db
#       sourceRef:
#         kind: HelmRepository
#         name: paas
#       version: 1.8.0
#       interval: 10m
#       valuesFiles:
#       - values.yaml
#   kubeConfig: 
#     secretRef: gke-paas-2
#   releaseName: pxc-1
#   targetNamespace: pxc
#   storageNamespace: pxc
#   dependsOn: pxc-operator
#   timeout: 10m0s
#   install:
#     createNamespace: false
#     skipCRDs: false
#   valuesFrom:
#   - kind: Secret
#     name: pxc-1-secret
#     valuesKey: root-password
#     targetPath: secrets.passwords.root    
#   values:
#     backupFrequency: MW
#     haproxy:
#       enabled: true
#       serviceType: LoadBalancer
#     pxc:
#       image:
#         tag: 8.0.22-13.1
#       persistence:
#         enabled: true
#         size: 1Gi
#       resources:
#         requests:
#           cpu: 400m
#           memory: 4G
#       sidecarVolumes:
#       - name: backup-nfs
#         persistentVolumeClaim:
#           claimName: pvc-mysql-0151
#       size: 3
#     retention: 1
#     schedule: 45 23 1 * *
#     scheduleIncremental: 45 23 * * 0
#     # secrets:
#     #   passwords:
#     #     root: Db@1234567
#     upgradeOptions:
#       apply: Disabled
# ---
# apiVersion:  helm.toolkit.fluxcd.io/v2beta1 
# kind: HelmRelease
# metadata:
#   name: pxc-operator
#   namespace: flux-system
# spec:
#   chart:
#     spec:
#       chart: pxc-operator
#       sourceRef:
#         kind: HelmRepository
#         name: paas
#       version: 1.8.0
#       interval: 10m
#       valuesFiles:
#       - values.yaml
#   kubeConfig: 
#     secretRef: gke-paas-2
#   releaseName: pxc-operator
#   targetNamespace: pxc
#   storageNamespace: pxc
#   timeout: 10m0s
#   install:
#     createNamespace: false
#     skipCRDs: false
#   values:
#     image:
#       repository: sridharlreddy/percona-operator
#       tag: 1.8.0-v1